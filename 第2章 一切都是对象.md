# 第2章 一切都是对象

## 2.1 用引用操作对象

拥有一个引用，并不一定需要有一个对象与它关联，例如，如果想操作一个词或句子，则可以创建一个String引用：

```java
String s;
```

但不与对象关联会产生错误，因此，在创建一个引用时要对其进行初始化。

## 2.2 创建所有对象

通常用**new**操作符来实现这一目的，例如：

```java
String s = new String("asdf");
```

### 2.2.1 对象存储位置

1. 寄存器：这是最快的存储区，它位于处理器内部，因为寄存器的数量有限，所以是根据需求进行分配，不能直接控制，也不能在程序中感觉到寄存器存在的迹象
2. 堆栈：位于通用RAM（随机访问寄存器）中，通过堆栈指针可以从处理器那里获得直接支持，分配新内存向下移动，释放内存向上移动。创建程序时，Java系统必须知道存储在堆栈内所有项的确切生命周期，以便上下移动堆栈指针。
3. 堆：一种通用的内存池（也位于RAM区），用于存放所有的Java对象。堆只有在new代码执行的时候会自动在堆里进行存储分配，不需要知道存储的数据的生命周期，但是堆进行存储分配和清理会花费更多的时间。
4. 常量存储：常量值通常直接存放在程序代码内部
5. 非RAM存储：在流对象中，对象转化成字节流，通常被发送给另一台机器。在“持久化对象”中，对象被存放于磁盘上，即使程序终止，也可以保持状态。

### 2.2.2 基本类型

不用new来创建变量，而是创建一个并非是引用的“自动”变量。这个变量直接存储“值”，并置于堆栈中。

### 2.2.3 数组

Java确保数组会被初始化，而且不能在它的范围之外被访问

## 2.3 不需要销毁对象

### 2.3.1 作用域

作用域决定了在其内定义的变量名的可见性和生命周期。由花括号{}决定

### 2.3.2 对象的作用域

当用new创建一个Java对象时，它可以存活于作用域于之外。假如：

```java
{
String s = new String("a string");
}
```

引用s在作用域终点就消失了，然而，s指向的String对象仍继续占据内存空间，但是我们无法再继续访问这个对象，因为已经超出了作用域的范围。

Java有一个垃圾回收器，用来监视new创建的所有对象，并辨别那些不会再被引用的对象，释放这些对象的内存空间。



## 2.4 类

### 2.6.3 static关键字

当声明一个事物是static时，就意味着这个域或方法不会与包含的类的任何对象实例关联在一起，即使不创建对象，也可以调用其static方法或访问其static域

